{"version":3,"sources":["pages/sign-up.jsx"],"names":["SignUp","history","useHistory","firebase","React","useContext","FirebaseContext","useState","username","setUsername","fullName","setFullname","emailAdress","setEmailAdress","password","setPassword","error","setError","isInvalid","handleSignUp","e","a","preventDefault","doesUsernameExist","length","auth","createUserWithEmailAndPassword","createdUserResult","user","updateProfile","displayName","firestore","collection","add","userId","uid","toLowerCase","following","dateCreated","Date","now","push","ROUTES","message","useEffect","document","title","className","src","alt","onSubmit","method","type","aria-label","placeholder","onChange","target","value","disabled","to"],"mappings":"yPAKe,SAASA,IACtB,IAAMC,EAAUC,cACRC,EAAaC,IAAMC,WAAWC,KAA9BH,SACR,EAAgCC,IAAMG,SAAS,IAA/C,mBAAOC,EAAP,KAAiBC,EAAjB,KACA,EAAgCL,IAAMG,SAAS,IAA/C,mBAAOG,EAAP,KAAiBC,EAAjB,KACA,EAAsCP,IAAMG,SAAS,IAArD,mBAAOK,EAAP,KAAoBC,EAApB,KACA,EAAgCT,IAAMG,SAAS,IAA/C,mBAAOO,EAAP,KAAiBC,EAAjB,KACA,EAA0BX,IAAMG,SAAS,IAAzC,mBAAOS,EAAP,KAAcC,EAAd,KAEMC,EAAyB,KAAbJ,GAAmC,KAAhBF,EAE/BO,EAAY,uCAAG,WAAOC,GAAP,eAAAC,EAAA,6DACnBD,EAAEE,iBADiB,SAEUC,YAAkBf,GAF5B,iBAGCgB,OAHD,0CAKiBrB,EAC7BsB,OACAC,+BAA+Bd,EAAaE,GAPhC,cAKTa,EALS,iBAQTA,EAAkBC,KAAKC,cAAc,CACzCC,YAAatB,IATA,yBAYTL,EAAS4B,YAAYC,WAAW,SAASC,IAAI,CACjDC,OAAQP,EAAkBC,KAAKO,IAC/B3B,SAAUA,EAAS4B,cACnB1B,WACAE,YAAaA,EAAYwB,cACzBC,UAAW,GACXC,YAAaC,KAAKC,QAlBL,QAqBfvC,EAAQwC,KAAKC,KArBE,kDAuBfjC,EAAY,IACZE,EAAY,IACZE,EAAe,IACfE,EAAY,IACZE,EAAS,KAAM0B,SA3BA,gCA8BjB1B,EAAS,sDA9BQ,0DAAH,sDAqClB,OAHAb,IAAMwC,WAAU,WACdC,SAASC,MAAQ,uBAChB,IAED,sBAAKC,UAAU,+DAAf,UACE,qBAAKA,UAAU,aAAf,SACE,qBACEC,IAAI,kCACJC,IAAI,gCAGR,sBAAKF,UAAU,sBAAf,UACE,sBAAKA,UAAU,6EAAf,UACE,oBAAIA,UAAU,6BAAd,SACE,qBAAKC,IAAI,mBAAmBC,IAAI,gBAEjCjC,GAAS,mBAAG+B,UAAU,gCAAb,SAA8C/B,IACxD,uBAAMkC,SAAU/B,EAAcgC,OAAO,OAAOJ,UAAU,OAAtD,UACE,uBACEK,KAAK,OACLC,aAAW,sBACXC,YAAY,WACZP,UAAU,2FACVQ,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgB/C,EAAY+C,EAAOC,QAC7CA,MAAOjD,IAET,uBACE4C,KAAK,OACLC,aAAW,uBACXC,YAAY,WACZP,UAAU,2FACVQ,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgB7C,EAAY6C,EAAOC,QAC7CA,MAAO/C,IAET,uBACE0C,KAAK,OACLC,aAAW,2BACXC,YAAY,eACZP,UAAU,2FACVQ,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgB3C,EAAe2C,EAAOC,QAChDA,MAAO7C,IAET,uBACEwC,KAAK,WACLC,aAAW,sBACXC,YAAY,WACZP,UAAU,2FACVQ,SAAU,gBAAGC,EAAH,EAAGA,OAAH,OAAgBzC,EAAYyC,EAAOC,QAC7CA,MAAO3C,IAET,wBACEsC,KAAK,SACLM,SAAUxC,EACV6B,UAAS,UACP7B,GAAa,aADN,2DAHX,2BAWJ,qBAAK6B,UAAU,wGAAf,SACE,oBAAGA,UAAU,UAAb,iCAEE,cAAC,IAAD,CAAMY,GAAG,QAAQZ,UAAU,6BAA3B","file":"static/js/7.e74029c1.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { FirebaseContext } from \"../context/firebase\";\r\nimport * as ROUTES from \"../constants/routes\";\r\nimport { doesUsernameExist } from \"../services/firebase\";\r\nexport default function SignUp() {\r\n  const history = useHistory();\r\n  const { firebase } = React.useContext(FirebaseContext);\r\n  const [username, setUsername] = React.useState(\"\");\r\n  const [fullName, setFullname] = React.useState(\"\");\r\n  const [emailAdress, setEmailAdress] = React.useState(\"\");\r\n  const [password, setPassword] = React.useState(\"\");\r\n  const [error, setError] = React.useState(\"\");\r\n\r\n  const isInvalid = password === \"\" || emailAdress === \"\";\r\n\r\n  const handleSignUp = async (e) => {\r\n    e.preventDefault();\r\n    const usernameExists = await doesUsernameExist(username);\r\n    if (!usernameExists.length) {\r\n      try {\r\n        const createdUserResult = await firebase\r\n          .auth()\r\n          .createUserWithEmailAndPassword(emailAdress, password);\r\n        await createdUserResult.user.updateProfile({\r\n          displayName: username,\r\n        });\r\n\r\n        await firebase.firestore().collection(\"users\").add({\r\n          userId: createdUserResult.user.uid,\r\n          username: username.toLowerCase(),\r\n          fullName,\r\n          emailAdress: emailAdress.toLowerCase(),\r\n          following: [],\r\n          dateCreated: Date.now(),\r\n        });\r\n\r\n        history.push(ROUTES.DASHBORD);\r\n      } catch (error) {\r\n        setUsername(\"\");\r\n        setFullname(\"\");\r\n        setEmailAdress(\"\");\r\n        setPassword(\"\");\r\n        setError(error.message);\r\n      }\r\n    } else {\r\n      setError(\"That username is already taken, please try another\");\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    document.title = \"Signup - Instagram\";\r\n  }, []);\r\n  return (\r\n    <div className=\"container flex mx-auto max-w-screen-md items-center h-screen\">\r\n      <div className=\"flex w-3/5\">\r\n        <img\r\n          src=\"/images/iphone-with-profile.jpg\"\r\n          alt=\"iphone with instagram app\"\r\n        />\r\n      </div>\r\n      <div className=\"flex flex-col w-2/5\">\r\n        <div className=\"flex flex-col items-center bg-white p-4 border border-gray-primary rounded\">\r\n          <h1 className=\"flex justify-center w-full\">\r\n            <img src=\"/images/logo.png\" alt=\"Instagram\" />\r\n          </h1>\r\n          {error && <p className=\"mb-4 text-xs text-red-primary\">{error}</p>}\r\n          <form onSubmit={handleSignUp} method=\"post\" className=\"mt-6\">\r\n            <input\r\n              type=\"text\"\r\n              aria-label=\"Enter your username\"\r\n              placeholder=\"Username\"\r\n              className=\"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2\"\r\n              onChange={({ target }) => setUsername(target.value)}\r\n              value={username}\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              aria-label=\"Enter your full name\"\r\n              placeholder=\"Fullname\"\r\n              className=\"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2\"\r\n              onChange={({ target }) => setFullname(target.value)}\r\n              value={fullName}\r\n            />\r\n            <input\r\n              type=\"text\"\r\n              aria-label=\"Enter your email address\"\r\n              placeholder=\"Email adress\"\r\n              className=\"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2\"\r\n              onChange={({ target }) => setEmailAdress(target.value)}\r\n              value={emailAdress}\r\n            />\r\n            <input\r\n              type=\"password\"\r\n              aria-label=\"Enter your password\"\r\n              placeholder=\"Password\"\r\n              className=\"text-sm text-gray-base w-full mr-3 py-5 px-4 h-2 border border-gray-primary rounded mb-2\"\r\n              onChange={({ target }) => setPassword(target.value)}\r\n              value={password}\r\n            />\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isInvalid}\r\n              className={`${\r\n                isInvalid && \"opacity-50\"\r\n              } bg-blue-medium rounded h-8 font-bold w-full text-white`}\r\n            >\r\n              Sign Up\r\n            </button>\r\n          </form>\r\n        </div>\r\n        <div className=\"flex justify-center items-center flex-col w-full bg-white p-4 border border-gray-primary mt-2 rounded\">\r\n          <p className=\"text-sm\">\r\n            Have an account?{` `}\r\n            <Link to=\"login\" className=\"font-bold text-blue-medium\">\r\n              Log In\r\n            </Link>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}