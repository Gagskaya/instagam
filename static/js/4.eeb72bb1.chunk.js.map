{"version":3,"sources":["components/Header.jsx","components/Sidebar/User.jsx","components/Sidebar/SuggestedProfile.jsx","components/Sidebar/Suggestions.jsx","components/Sidebar/index.jsx","hooks/use-user.js","components/Post/Header.jsx","components/Post/Image.jsx","components/Post/Actions.jsx","components/Post/Footer.jsx","components/Post/AddComment.jsx","components/Post/Comments.jsx","components/Post/index.jsx","components/Timeline.jsx","hooks/use-photos.js","pages/dashboard.jsx"],"names":["Header","firebase","React","useContext","FirebaseContext","user","UserContext","className","to","ROUTES","aria-label","src","alt","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","title","type","onKeyDown","e","key","auth","signOut","onClick","displayName","User","username","fullName","count","height","memo","SuggestedProfile","spDocId","profileId","userId","loggedInUserDocId","useState","followed","setFollowed","a","updateLoggedInUserFollowing","updateFollowedUsersFollowers","Suggestions","following","profiles","setProfiles","useEffect","getSuggestedProfiles","response","suggestedProfiles","length","map","profile","docId","Sidebar","activeUser","setActiveUser","getUserByUserId","uid","getUserObjByUserId","useUser","Image","caption","Actions","totalLikes","likedPhoto","handleFocus","toggleLiked","setToggleLiked","likes","setLikes","FieldValue","handleToggleLiked","firestore","collection","doc","update","arrayRemove","arrayUnion","event","tabIndex","Footer","AddComment","comments","setComments","commentInput","comment","setComment","handleSubmitComment","preventDefault","method","onSubmit","autoComplete","name","placeholder","value","onChange","target","ref","disabled","Comments","allComments","posted","slice","item","formatDistance","Date","Post","content","useRef","imageSrc","userLikedPhoto","current","focus","dateCreated","Timeline","photos","setPhotos","followedUserPhotos","getPhotos","sort","b","getTimelinePhotos","usePhotos","width","Dashborad","document"],"mappings":"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","file":"static/js/4.eeb72bb1.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { UserContext } from \"./../context/user\";\r\nimport { FirebaseContext } from \"./../context/firebase\";\r\nimport { Link } from \"react-router-dom\";\r\nimport * as ROUTES from \"./../constants/routes\";\r\nexport default function Header() {\r\n  const { firebase } = React.useContext(FirebaseContext);\r\n  const { user } = React.useContext(UserContext);\r\n  return (\r\n    <header className=\"h-16 bg-white border-b border-gray-primary mb-8\">\r\n      <div className=\"container mx-auto max-w-screen-lg h-full\">\r\n        <div className=\"flex justify-between h-full\">\r\n          <div className=\"text-gray-700 text-center flex items-center align-item cursor-pointer\">\r\n            <h1 className=\"flex justify-center w-full\">\r\n              <Link to={ROUTES.DASHBORD} aria-label=\"Instagram logo\">\r\n                <img\r\n                  src=\"/images/logo.png\"\r\n                  alt=\"instagram\"\r\n                  className=\"mt-2 w-6/12\"\r\n                />\r\n              </Link>\r\n            </h1>\r\n          </div>\r\n          <div className=\"text-gray-700 text-center flex items-center align-items\">\r\n            {user ? (\r\n              <>\r\n                <Link aria-label=\"Dashboard\" to={ROUTES.DASHBORD}>\r\n                  <svg\r\n                    className=\"w-8 mr-6 text-black-light cursor-pointer\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    stroke=\"currentColor\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\"\r\n                    />\r\n                  </svg>\r\n                </Link>\r\n                <button\r\n                  title=\"Sign Out\"\r\n                  type=\"button\"\r\n                  onKeyDown={(e) => {\r\n                    if (e.key === \"Enter\") {\r\n                      firebase.auth().signOut();\r\n                    }\r\n                  }}\r\n                  onClick={() => firebase.auth().signOut()}\r\n                >\r\n                  <svg\r\n                    className=\"w-8 mr-6 text-black-light cursor-pointer\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    stroke=\"currentColor\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\"\r\n                    />\r\n                  </svg>\r\n                </button>\r\n                <div className=\"flex items-center cursor-pointer\">\r\n                  <Link to={`/p/${user.displayName}`}>\r\n                    <img\r\n                      src={`/images/avatars/${user.displayName}.jpg`}\r\n                      className=\"rounded-full h-8 w-8 flex\"\r\n                      alt={`${user.displayName} profile`}\r\n                    />\r\n                  </Link>\r\n                </div>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <Link to={ROUTES.LOGIN}>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"bg-blue-medium font-bold text-sm rounded text-white w-20 h-8\"\r\n                  >\r\n                    Log In\r\n                  </button>\r\n                </Link>\r\n                <Link to={ROUTES.SIGN_UP}>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"font-bold text-sm rounded text-blue-medium w-20 h-8\"\r\n                  >\r\n                    Sign Up\r\n                  </button>\r\n                </Link>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\n\r\nconst User = ({ username, fullName }) =>\r\n  !username || !fullName ? (\r\n    <Skeleton count={1} height={61} />\r\n  ) : (\r\n    <Link\r\n      to={`/p/${username}`}\r\n      className=\"grid grid-cols-4 gap-4 mb-6 items-center\"\r\n    >\r\n      <div className=\"flex items-center justify-between col-span-1\">\r\n        <img\r\n          src={`/images/avatars/${username}.jpg`}\r\n          alt=\"\"\r\n          className=\"rounded-full w-16 flex mr-3\"\r\n        />\r\n      </div>\r\n      <div className=\"col-span-3\">\r\n        <p className=\"font-bold text-sm\">{username}</p>\r\n        <p className=\"text-sm\">{fullName}</p>\r\n      </div>\r\n    </Link>\r\n  );\r\nUser.propTypes = {\r\n  username: PropTypes.string,\r\n  fullName: PropTypes.string,\r\n};\r\nexport default React.memo(User);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Link } from \"react-router-dom\";\r\nimport {\r\n  updateLoggedInUserFollowing,\r\n  updateFollowedUsersFollowers,\r\n} from \"../../services/firebase\";\r\nexport default function SuggestedProfile({\r\n  spDocId,\r\n  username,\r\n  profileId,\r\n  userId,\r\n  loggedInUserDocId,\r\n}) {\r\n  const [followed, setFollowed] = React.useState(false);\r\n  async function handleFollowUser() {\r\n    setFollowed(true);\r\n    await updateLoggedInUserFollowing(loggedInUserDocId, profileId, false);\r\n    await updateFollowedUsersFollowers(userId, spDocId);\r\n  }\r\n  return !followed ? (\r\n    <div className=\"flex flex items-center align-items justify-between\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <img\r\n          className=\"rounded-full w-8 flex mr-3 \"\r\n          src={`/images/avatars/${username}.jpg`}\r\n          alt=\"\"\r\n        />\r\n        <Link to={`/p/${username}`}>\r\n          <p className=\"font-bold text-sm\">{username}</p>\r\n        </Link>\r\n      </div>\r\n\r\n      <button\r\n        onClick={handleFollowUser}\r\n        className=\"text-xs font-bold text-blue-medium\"\r\n        type=\"button\"\r\n      >\r\n        Follow\r\n      </button>\r\n    </div>\r\n  ) : null;\r\n}\r\n\r\nSuggestedProfile.propTypes = {\r\n  spDocId: PropTypes.string.isRequired,\r\n  username: PropTypes.string.isRequired,\r\n  profileId: PropTypes.string.isRequired,\r\n  userId: PropTypes.string.isRequired,\r\n  loggedInUserDocId: PropTypes.string,\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport { getSuggestedProfiles } from \"../../services/firebase\";\r\nimport SuggestedProfile from \"./SuggestedProfile\";\r\n\r\nexport default function Suggestions({ userId, following, loggedInUserDocId }) {\r\n  const [profiles, setProfiles] = React.useState(null);\r\n  React.useEffect(() => {\r\n    async function suggestedProfiles() {\r\n      const response = await getSuggestedProfiles(userId, following);\r\n      setProfiles(response);\r\n    }\r\n    if (userId) {\r\n      suggestedProfiles();\r\n    }\r\n  }, [userId, following]);\r\n\r\n  return !profiles ? (\r\n    <Skeleton count={1} height={150} className=\"mt-5\" />\r\n  ) : profiles.length > 0 ? (\r\n    <div className=\"rounded flex flex-col\">\r\n      <div className=\"text-sm flex item-center align-items justify between mb-2\">\r\n        <p className=\"font-bold text-gray-base\">Suggestions for you</p>\r\n      </div>\r\n      <div className=\"mt-4 gap-5\">\r\n        {profiles &&\r\n          profiles.map((profile) => (\r\n            <SuggestedProfile\r\n              key={profile.docId}\r\n              spDocId={profile.docId}\r\n              profileId={profile.userId}\r\n              username={profile.username}\r\n              userId={userId}\r\n              loggedInUserDocId={loggedInUserDocId}\r\n            />\r\n          ))}\r\n      </div>\r\n    </div>\r\n  ) : null;\r\n}\r\n\r\nSuggestions.propTypes = {\r\n  userId: PropTypes.string,\r\n  following: PropTypes.array,\r\n  loggedInUserDocId: PropTypes.string,\r\n};\r\n","import React from \"react\";\r\nimport useUser from \"../../hooks/use-user\";\r\nimport User from \"./User\";\r\nimport Suggestions from \"./Suggestions\";\r\n\r\nexport default function Sidebar() {\r\n  const {\r\n    user: { docId, fullName, username, userId, following },\r\n  } = useUser();\r\n  return (\r\n    <div className=\"p-4\">\r\n      <User username={username} fullName={fullName} />\r\n      <Suggestions\r\n        userId={userId}\r\n        following={following}\r\n        loggedInUserDocId={docId}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { UserContext } from \"../context/user\";\r\nimport { getUserByUserId } from \"../services/firebase\";\r\n\r\nexport default function useUser() {\r\n  const [activeUser, setActiveUser] = React.useState({});\r\n  const { user } = React.useContext(UserContext);\r\n\r\n  React.useEffect(() => {\r\n    async function getUserObjByUserId() {\r\n      const [response] = await getUserByUserId(user.uid);\r\n      setActiveUser(response);\r\n    }\r\n    if (user?.uid) {\r\n      getUserObjByUserId();\r\n    }\r\n  }, [user]);\r\n  return { user: activeUser };\r\n}\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport default function Header({ username }) {\r\n  return (\r\n    <div className=\"flex border-b border-gray-primary h-4 p-4 py-8\">\r\n      <div className=\"flex items-center\">\r\n        <Link to={`/p/${username}`} className=\"flex items-center\">\r\n          <img\r\n            src={`/images/avatars/${username}.jpg`}\r\n            alt={`${username} profile`}\r\n            className=\"rounded-full h-8 w-8 flex mr-3\"\r\n          />\r\n          <p className=\"font-bold\">{username}</p>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nHeader.propTypes = {\r\n  username: PropTypes.string.isRequired,\r\n};\r\n","import PropTypes from \"prop-types\";\r\n\r\nexport default function Image({ src, caption }) {\r\n  return <img src={src} alt={caption} />;\r\n}\r\n\r\nImage.propTypes = {\r\n  src: PropTypes.string.isRequired,\r\n  caption: PropTypes.string.isRequired,\r\n};\r\n","import React from \"react\";\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport { FirebaseContext } from \"../../context/firebase\";\r\nimport { UserContext } from \"../../context/user\";\r\nexport default function Actions({\r\n  docId,\r\n  totalLikes,\r\n  likedPhoto,\r\n  handleFocus,\r\n}) {\r\n  const {\r\n    user: { uid: userId = \"\" },\r\n  } = React.useContext(UserContext);\r\n  const [toggleLiked, setToggleLiked] = React.useState(likedPhoto);\r\n  const [likes, setLikes] = React.useState(totalLikes);\r\n  const { firebase, FieldValue } = React.useContext(FirebaseContext);\r\n  const handleToggleLiked = async () => {\r\n    setToggleLiked((toggleLiked) => !toggleLiked);\r\n    await firebase\r\n      .firestore()\r\n      .collection(\"photos\")\r\n      .doc(docId)\r\n      .update({\r\n        likes: toggleLiked\r\n          ? FieldValue.arrayRemove(userId)\r\n          : FieldValue.arrayUnion(userId),\r\n      });\r\n    setLikes((likes) => (toggleLiked ? likes - 1 : likes + 1));\r\n  };\r\n  return (\r\n    <>\r\n      <div className=\"flex justify-content p-4\">\r\n        <div className=\"flex\">\r\n          <svg\r\n            onClick={handleToggleLiked}\r\n            onKeyDown={(event) => {\r\n              if (event.key === \"Enter\") {\r\n                handleToggleLiked();\r\n              }\r\n            }}\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n            tabIndex={0}\r\n            className={`w-8 mr-4 select-none cursor-pointer focus:outline-none ${\r\n              toggleLiked ? \"fill-red text-red-primary\" : \"text-black-light\"\r\n            }`}\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\"\r\n            />\r\n          </svg>\r\n          <svg\r\n            onClick={handleFocus}\r\n            onKeyDown={(event) => {\r\n              if (event.key === \"Enter\") {\r\n                handleFocus();\r\n              }\r\n            }}\r\n            className=\"w-8 text-black-light select-none cursor-pointer focus:outline-none\"\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            stroke=\"currentColor\"\r\n            tabIndex={0}\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\r\n            />\r\n          </svg>\r\n        </div>\r\n      </div>\r\n      <div className=\"p-4 py-0 \">\r\n        <p className=\"font-bold\">\r\n          {likes === 1 ? `${likes} like` : `${likes} like`}\r\n        </p>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nActions.propTypes = {\r\n  docId: PropTypes.string.isRequired,\r\n  totalLikes: PropTypes.number.isRequired,\r\n  likedPhoto: PropTypes.bool.isRequired,\r\n  handleFocus: PropTypes.func.isRequired,\r\n};\r\n","import React from \"react\";\r\n\r\nimport PropTypes from \"prop-types\";\r\nexport default function Footer({ caption, username }) {\r\n  return (\r\n    <div className=\"p-4 pt-2 pb-8\">\r\n      <span className=\"mr-1 font-bold\">\r\n        {username}\r\n        {` `}\r\n        <span>{caption}</span>\r\n      </span>\r\n    </div>\r\n  );\r\n}\r\n\r\nFooter.propTypes = {\r\n  caption: PropTypes.string.isRequired,\r\n  username: PropTypes.string.isRequired,\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { FirebaseContext } from \"../../context/firebase\";\r\nimport { UserContext } from \"../../context/user\";\r\nexport default function AddComment({\r\n  docId,\r\n  comments,\r\n  setComments,\r\n  commentInput,\r\n}) {\r\n  const [comment, setComment] = React.useState(\"\");\r\n  const { firebase, FieldValue } = React.useContext(FirebaseContext);\r\n  const {\r\n    user: { displayName },\r\n  } = React.useContext(UserContext);\r\n  const handleSubmitComment = (e) => {\r\n    e.preventDefault();\r\n    setComments([{ displayName, comment }, ...comments]);\r\n    setComment(\"\");\r\n    return firebase\r\n      .firestore()\r\n      .collection(\"photos\")\r\n      .doc(docId)\r\n      .update({\r\n        comments: FieldValue.arrayUnion({ displayName, comment }),\r\n      });\r\n  };\r\n  return (\r\n    <div className=\"border-t border-gray-primary\">\r\n      <form\r\n        className=\"flex justify-between pl-0 pr-5\"\r\n        method=\"POST\"\r\n        onSubmit={(e) =>\r\n          comment.length >= 1 ? handleSubmitComment(e) : e.preventDefault()\r\n        }\r\n      >\r\n        <input\r\n          type=\"text\"\r\n          aria-label=\"Add a comment\"\r\n          autoComplete=\"off\"\r\n          className=\"text-sm text-gray-base w-full mr-3 py-5 px-4\"\r\n          name=\"add-comment\"\r\n          placeholder=\"Add a comment...\"\r\n          value={comment}\r\n          onChange={(e) => setComment(e.target.value)}\r\n          ref={commentInput}\r\n        />\r\n        <button\r\n          className={`text-sm font-bold text-blue-medium ${\r\n            !comment && \"opacity-25\"\r\n          }`}\r\n          type=\"button\"\r\n          disabled={comment.length < 1}\r\n          onClick={handleSubmitComment}\r\n        >\r\n          Post\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\nAddComment.propTypes = {\r\n  docId: PropTypes.string.isRequired,\r\n  comments: PropTypes.array.isRequired,\r\n  setComments: PropTypes.func.isRequired,\r\n  commentInput: PropTypes.object,\r\n};\r\n","import React from \"react\";\r\n\r\nimport PropTypes from \"prop-types\";\r\nimport { formatDistance } from \"date-fns\";\r\nimport { Link } from \"react-router-dom\";\r\nimport AddComment from \"./AddComment\";\r\nexport default function Comments({\r\n  docId,\r\n  comments: allComments,\r\n  posted,\r\n  commentInput,\r\n}) {\r\n  const [comments, setComments] = React.useState(allComments);\r\n  return (\r\n    <>\r\n      <div className=\"p-4 pt-1 pb-4\">\r\n        {comments?.length >= 1 && (\r\n          <p className=\"text-sm text-gray-base mb-1 cursor-pointer\">\r\n            View all {comments.length} comments\r\n          </p>\r\n        )}\r\n        {comments.slice(0, 3).map((item) => (\r\n          <p key={`${item.comment}-${item.displayName}`} className=\"mb-1\">\r\n            <Link to={`/p/${item.displayName}`}>\r\n              <span className=\"mr-1 font-bold\">{item.displayName}</span>\r\n            </Link>\r\n            <span>{item.comment}</span>\r\n          </p>\r\n        ))}\r\n        <p className=\"text-gray-base  text-xs\">\r\n          {formatDistance(posted, new Date())} ago\r\n        </p>\r\n      </div>\r\n      <AddComment\r\n        docId={docId}\r\n        comments={comments}\r\n        setComments={setComments}\r\n        commentInput={commentInput}\r\n      />\r\n    </>\r\n  );\r\n}\r\nComments.propTypes = {\r\n  docId: PropTypes.string.isRequired,\r\n  comments: PropTypes.array.isRequired,\r\n  posted: PropTypes.number.isRequired,\r\n  commentInput: PropTypes.object.isRequired,\r\n};\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport Header from \"./Header\";\r\nimport Image from \"./Image\";\r\nimport Actions from \"./Actions\";\r\nimport Footer from \"./Footer\";\r\nimport Comments from \"./Comments\";\r\nexport default function Post({ content }) {\r\n  const commentInput = React.useRef(null);\r\n  const handleFocus = () => commentInput.current.focus();\r\n  return (\r\n    <div className=\"rounded col-span-4 border bg-white border-gray-primary mb-12\">\r\n      <Header username={content.username} />\r\n      <Image src={content.imageSrc} caption={content.caption} />\r\n      <Actions\r\n        docId={content.docId}\r\n        likedPhoto={content.userLikedPhoto}\r\n        totalLikes={content.likes.length}\r\n        handleFocus={handleFocus}\r\n      />\r\n      <Footer caption={content.caption} username={content.username} />\r\n      <Comments\r\n        docId={content.docId}\r\n        comments={content.comments}\r\n        posted={content.dateCreated}\r\n        commentInput={commentInput}\r\n      />\r\n    </div>\r\n  );\r\n}\r\nPost.propTypes = {\r\n  content: PropTypes.shape({\r\n    username: PropTypes.string.isRequired,\r\n    imageSrc: PropTypes.string.isRequired,\r\n    caption: PropTypes.string.isRequired,\r\n    docId: PropTypes.string.isRequired,\r\n    userLikedPhoto: PropTypes.bool.isRequired,\r\n    likes: PropTypes.array.isRequired,\r\n    comments: PropTypes.array.isRequired,\r\n    dateCreated: PropTypes.number.isRequired,\r\n  }),\r\n};\r\n","import React from \"react\";\r\nimport Skeleton from \"react-loading-skeleton\";\r\nimport usePhotos from \"../hooks/use-photos\";\r\nimport Post from \"../components/Post\";\r\n\r\nexport default function Timeline() {\r\n  const { photos } = usePhotos();\r\n\r\n  return (\r\n    <div className=\"container col-span-2\">\r\n      {!photos ? (\r\n        <Skeleton\r\n          count={photos?.length}\r\n          width={640}\r\n          height={400}\r\n          className=\"mb-5\"\r\n        />\r\n      ) : photos?.length > 0 ? (\r\n        photos.map((content) => <Post key={content.docId} content={content} />)\r\n      ) : (\r\n        <p className=\"text-center text-2xl\">Follow people to see people</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { UserContext } from \"../context/user\";\r\nimport { getPhotos, getUserByUserId } from \"../services/firebase\";\r\n\r\nexport default function usePhotos() {\r\n  const [photos, setPhotos] = React.useState(null);\r\n  const {\r\n    user: { uid: userId = \"\" },\r\n  } = React.useContext(UserContext);\r\n  React.useEffect(() => {\r\n    async function getTimelinePhotos() {\r\n      // does the user actually follow people?\r\n      const [{ following }] = await getUserByUserId(userId);\r\n      let followedUserPhotos = [];\r\n      if (following.length > 0) {\r\n        followedUserPhotos = await getPhotos(userId, following);\r\n      }\r\n      followedUserPhotos.sort((a, b) => b.dateCreated - a.dateCreated);\r\n      setPhotos(followedUserPhotos);\r\n    }\r\n\r\n    getTimelinePhotos();\r\n  }, [userId]);\r\n  return { photos };\r\n}\r\n","import React from \"react\";\r\n\r\nimport Header from \"./../components/Header\";\r\nimport Sidebar from \"./../components/Sidebar\";\r\nimport Timeline from \"./../components/Timeline\";\r\n\r\nexport default function Dashborad() {\r\n  React.useEffect(() => {\r\n    document.title = \"Instagram\";\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"bg-gray-background\">\r\n      <Header />\r\n      <div className=\"grid grid-cols-3 gap-4 justify-between mx-auto max-w-screen-lg\">\r\n        <Timeline />\r\n        <Sidebar />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"sourceRoot":""}